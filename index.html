<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How Old is Winnie</title>
</head>
<body>
    <h1>
        Winnie is <span id="age"></span>
    </h1>
    <script>
        const birthday = new Date('2022-05-08').getTime()
        const age = document.getElementById('age')

        const millisecond = 1
        const second = millisecond * 1000
        const minute = second * 60
        const hour = minute * 60
        const day = hour * 24
        const week = day * 7
        const month = day * 30
        const year = day * 365

        function formatDuration(ms, sigFigs) {
            if (ms < 0) ms = -ms;

            const time = [
                ['year', year],
                // ['month', month],
                ['week', week],
                ['day', day],
                ['hour', hour],
                ['minute', minute],
                ['second', second],
                ['millisecond', millisecond]
            ];
            
            let current = ms
            let result = ''

            let lastDuration = Number.MAX_SAFE_INTEGER
            
            let count = 0

            for (const [name, duration] of time) {
                count++
                const floor = Math.floor((current / duration) % lastDuration)
                if (duration <= current) {
                    const s = floor !== 1 ? 's' : ''
                    result += `${floor} ${name}${s}, `
                }
                current = current - (floor * duration)

                if (count > sigFigs) {
                    break
                }
            }

            return result.slice(0, -2)
        };

        function setAge() {
            age.innerText = formatDuration(Date.now() - birthday, 2)
        }
        setAge()
        setInterval(setAge, 1000);
    </script>
</body>
</html>